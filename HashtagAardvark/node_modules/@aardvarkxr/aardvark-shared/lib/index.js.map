{"version":3,"sources":["webpack://aardvark-shared/webpack/universalModuleDefinition","webpack://aardvark-shared/webpack/bootstrap","webpack://aardvark-shared/./src/index.ts","webpack://aardvark-shared/./node_modules/tslib/tslib.es6.js","webpack://aardvark-shared/./src/stored_state.ts","webpack://aardvark-shared/./src/aardvark.ts","webpack://aardvark-shared/./src/aardvark_protocol.ts","webpack://aardvark-shared/./src/models.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","constructor","__assign","assign","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__exportStar","__values","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","default","__importDefault","AardvarkStateFormat","getStandardAardvarkPath","os","eval","path","join","homedir","getStandardPersistencePath","v1ToV2","from","to","format","activeGadgets","installedGadgets","installed","replace","readPersistentState","fs","previousState","readFileSync","state","JSON","parse","console","log","uri","hookPath","keys","writePersistentState","writeFileSync","stringify","window","aardvark","EndpointType","ETextureType","ETextureFormat","EAction","endpointTypeFromCharacter","Hub","Gadget","Node","Monitor","Renderer","Unknown","endpointAddrIsEmpty","epa","undefined","type","endpointAddrsMatch","epa1","epa2","nodeId","endpointId","AardvarkPort","MessageType","WebSocketCloseCodes","ept","endpointCharacterFromType","epaStr","match","RegExp","exec","parseInt","epaArray","EHookVolume","envString","parsePayload","env","payload","payloadUnpacked","AvNodeType","AvPanelMouseEventType","AvGrabEventType","GrabberHighlight","EVolumeType","ENodeFlags","EHand","action","A","B","Grab","grab","Squeeze","squeeze","Detach","detach","actionState","g_builtinModelPrefix","g_builtinModelAardvark","g_builtinModelSphere","g_builtinModelGear","g_builtinModelPanel","g_builtinModelPanelInverted","g_builtinModelHook","g_builtinModelArrow","g_builtinModelBoundingBox","g_builtinModelCylinder","g_builtinModelPlus","g_builtinModelMinus","g_builtinModelBracelet","g_builtinModelError"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"aardvark-shared\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aardvark-shared\"] = factory();\n\telse\n\t\troot[\"aardvark-shared\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export * from './stored_state';\r\nexport * from './aardvark';\r\nexport * from './aardvark_protocol';\r\nexport * from './models';\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { AvNodeTransform } from './aardvark_protocol';\r\n\r\ninterface GadgetPersistence\r\n{\r\n\turi: string;\r\n\thookPath?: string;\r\n\tsettings?: any;\r\n}\r\n\r\nexport interface StoredGadget\r\n{\r\n\turi: string;\r\n\tuuid: string;\r\n}\r\n\r\nconst AardvarkStateFormat = 2;\r\n\r\nexport interface AardvarkState\r\n{\r\n\tformat: number;\r\n\tactiveGadgets: { [uuid:string]: GadgetPersistence };\r\n\tinstalledGadgets: string[];\r\n}\r\n\r\n\r\nexport function getStandardAardvarkPath(): string\r\n{\r\n\tlet os = eval( \"require( 'os' )\" );\r\n\tlet path = eval( \"require( 'path' ) \");\r\n\treturn path.join( os.homedir(), \"aardvark\" );\r\n}\r\n\r\nexport function getStandardPersistencePath(): string\r\n{\r\n\tlet path = eval( \"require( 'path' )\" );\r\n\treturn path.join( getStandardAardvarkPath(), \"state.json\" );\r\n}\r\n\r\nexport function v1ToV2( from: AardvarkState ): AardvarkState\r\n{\r\n\tlet to: AardvarkState = \r\n\t{ \r\n\t\tformat: 2,\r\n\t\tactiveGadgets: from.activeGadgets,\r\n\t\tinstalledGadgets: [] \r\n\t};\r\n\r\n\tfor( let installed of from.installedGadgets )\r\n\t{\r\n\t\tto.installedGadgets.push( installed.replace( \"aardvark.install\", \"localhost:23842\" ) );\r\n\t}\r\n\r\n\treturn to;\r\n}\r\n\r\nexport function readPersistentState( path: string ): AardvarkState\r\n{\r\n\ttry\r\n\t{\r\n\t\tlet fs = eval( \"require( 'fs' )\" );\r\n\r\n\t\tlet previousState = fs.readFileSync( path, 'utf8' );\r\n\t\tlet state:AardvarkState = JSON.parse( previousState );\r\n\r\n\t\tif( state.format == 1 )\r\n\t\t{\r\n\t\t\tstate = v1ToV2( state );\r\n\t\t}\r\n\r\n\t\tif( state.format != AardvarkStateFormat )\r\n\t\t{\r\n\t\t\tthrow `Inappropriate state format ${state.format}`;\r\n\t\t}\r\n\r\n\t\tif( !state.activeGadgets[ \"gadget_menu\" ] )\r\n\t\t{\r\n\t\t\tconsole.log( \"Gadget menu was missing. Forcing that to exist.\" );\r\n\t\t\tstate.activeGadgets[ \"gadget_menu\" ]=\r\n\t\t\t{\r\n\t\t\t\turi: \"http://localhost:23842/gadgets/gadget_menu\",\r\n\t\t\t\thookPath: \"/gadget/master/left_hand\",\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tconsole.log( `Read state from ${ path } for `\r\n\t\t\t+ `${ Object.keys( state.activeGadgets ).length } active gadgets` );\r\n\t\treturn state;\r\n\t}\r\n\tcatch( e )\r\n\t{\r\n\t\tconsole.log( \"Failed to read state file. Using default start\" );\r\n\r\n\t\tlet state =\r\n\t\t{\r\n\t\t\tformat: AardvarkStateFormat,\r\n\t\t\tactiveGadgets: \r\n\t\t\t{\r\n\t\t\t\t\"master\" : { uri: \"http://localhost:23842/gadgets/aardvark_master\" },\r\n\t\t\t\t\"gadget_menu\" :\r\n\t\t\t\t{\r\n\t\t\t\t\turi: \"http://localhost:23842/gadgets/gadget_menu\",\r\n\t\t\t\t\thookPath: \"/gadget/master/left_hand\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinstalledGadgets: \r\n\t\t\t[\r\n\t\t\t\t\"http://localhost:23842/gadgets/test_panel\",\r\n\t\t\t\t\"http://localhost:23842/gadgets/control_test\",\r\n\t\t\t],\r\n\t\t}\r\n\t\treturn state;\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport function writePersistentState( state: AardvarkState, path: string ): boolean\r\n{\r\n\tlet fs = eval( \"require( 'fs' )\" );\r\n\tstate.format = AardvarkStateFormat;\r\n\tfs.writeFileSync( path, JSON.stringify( state, null, 2 ) );\r\n\treturn true;\r\n}\r\n\r\n","import { AvGadgetManifest, AvPanelMouseEventType, EndpointAddr, \r\n\tMsgGrabberState, MsgPokerProximity, AvSharedTextureInfo, \r\n\tEHand, \r\n\tAABB as Aabb} from './aardvark_protocol';\r\n\r\nexport interface AvTraversalRenderer\r\n{\r\n\t(): void;\r\n}\r\nexport interface AvHapticProcessor\r\n{\r\n\t( globalNodeId: string, amplitude: number, frequence: number, duration: number ): void;\r\n}\r\n\r\nexport interface AvModelInstance\r\n{\r\n\tsetUniverseFromModelTransform( universeFromModel: number[] ): void;\r\n\tsetOverrideTexture( textureInfo: AvSharedTextureInfo ): void;\r\n\tsetBaseColor( color: [ number, number, number, number ] ): void;\r\n}\r\n\r\n\r\nexport interface AvActionState\r\n{\r\n\t// these actions are available to held gadgets\r\n\ta: boolean;\r\n\tb: boolean;\r\n\tsqueeze: boolean;\r\n\r\n\t// these actions are not available to gadgets\r\n\tgrab?: boolean;\r\n\tdetach?: boolean;\r\n}\r\n\r\n\r\ninterface AvRenderer\r\n{\r\n\tregisterTraverser( traverser: AvTraversalRenderer ): void;\r\n\trenderList( renderList: AvModelInstance[] ): void,\r\n\tcreateModelInstance( uri: string): AvModelInstance;\r\n\tgetUniverseFromOriginTransform( origin: string ): number[];\r\n\tgetAABBForModel( uri: string ): Aabb;\r\n\r\n\tregisterHapticProcessor( hapticProcessor: AvHapticProcessor ) : void;\r\n\tsendHapticEventForHand( hand: EHand, amplitude: number, frequency: number, duration: number ): void;\r\n\r\n\tupdatePokerProximity(): MsgPokerProximity[];\r\n\taddActivePanel( panelGlobalId: EndpointAddr, nodeFromUniverse: number[], zScale: number, hand: EHand  ): void;\r\n\taddActivePoker( pokerGlobalId: EndpointAddr, pokerInUniverse: number[], hand: EHand  ): void;\r\n\t\r\n\tupdateGrabberIntersections(): MsgGrabberState[];\r\n\taddGrabbableHandle_Sphere( grabbableGlobalId: EndpointAddr, \r\n\t\thandleGlobalId: EndpointAddr,\r\n\t\tuniverseFromHandle: number[], radius: number, hand: EHand ): void;\r\n\taddGrabbableHandle_ModelBox( grabbableGlobalId: EndpointAddr, \r\n\t\thandleGlobalId: EndpointAddr,\r\n\t\tuniverseFromHandle: number[], uri: string, hand: EHand ): void;\r\n\taddGrabber_Sphere( grabberGlobalId: EndpointAddr, universeFromGrabber: number[], radius: number, hand: EHand ): void;\r\n\taddHook_Sphere( hookGlobalId: EndpointAddr, universeFromGrabber: number[], radius: number, hand: EHand, outerVolumeScale: number  ): void;\r\n\taddHook_Aabb( hookGlobalId: EndpointAddr, universeFromGrabber: number[], aabb: Aabb, hand: EHand, outerVolumeScale: number  ): void;\r\n\r\n\tstartGrab( grabberGlobalId: EndpointAddr, grabbableGlobalId: EndpointAddr  ): void;\r\n\tendGrab( grabberGlobalId: EndpointAddr, grabbableGlobalId: EndpointAddr  ): void;\r\n\r\n\tgetActionState( hand: EHand ): AvActionState;\r\n}\r\n\r\nexport interface AvStartGadgetCallback\r\n{\r\n\t(success: boolean, mainGrabbableGlobalId: EndpointAddr, mainHandleId: EndpointAddr ) : void;\r\n}\r\n\r\nexport interface AvGadgetManifestCallback\r\n{\r\n\t(manifest: AvGadgetManifest) : void;\r\n}\r\n\r\n\r\nexport interface AvBrowserTextureCallback\r\n{\r\n\t( textureInfo: AvSharedTextureInfo ): void;\r\n}\r\n\r\nexport interface Aardvark\r\n{\r\n\t// requires scenegraph permissions\r\n\tsubscribeToBrowserTexture( callback: AvBrowserTextureCallback ): void;\r\n\tspoofMouseEvent( type:AvPanelMouseEventType, x: number, y: number ): void;\r\n\r\n\t// requires master permissions\r\n\tstartGadget( uri: string, initialHook: string, persistenceUuid: string, epToNotify: EndpointAddr ): void;\r\n\tgetGadgetManifest( uri: string, callback: AvGadgetManifestCallback ): void;\r\n\r\n\t/** Destroys the current browser. */\r\n\tcloseBrowser(): void;\r\n\r\n\t// requires renderer permissions\r\n\trenderer: AvRenderer;\r\n}\r\n\r\ndeclare global\r\n{\r\n\tinterface Window\r\n\t{\r\n\t\taardvark: any;\r\n\t}\r\n}\r\n\r\nexport function Av():Aardvark\r\n{\r\n\treturn window.aardvark as Aardvark;\r\n}\r\n","import { AvActionState } from './aardvark';\r\n\r\nexport const AardvarkPort = 23842;\r\n\r\nexport enum MessageType\r\n{\r\n\t// initialization messages. These are the only messages that \r\n\t// aren't required to have a sender.\r\n\tSetEndpointType = 100,\r\n\tSetEndpointTypeResponse = 101,\r\n\tError = 102,\r\n\tGetGadgetManifest = 103,\r\n\tGetGadgetManifestResponse = 104,\r\n\t\r\n\t// Monitor messages\r\n\t// these are send to monitors to give them meta context\r\n\tNewEndpoint = 200,\r\n\tLostEndpoint = 201,\r\n\tOverrideTransform = 202,\r\n\r\n\t// Gadget messages\r\n\tUpdateSceneGraph = 300,\r\n\tGrabEvent = 301,\r\n\tGrabberState = 302,\r\n\tGadgetStarted = 303,\t\r\n\tPokerProximity = 304,\r\n\tMouseEvent = 305,\r\n\tNodeHaptic = 306,\r\n\tAttachGadgetToHook = 307,\r\n\tDetachGadgetFromHook = 308,\r\n\tMasterStartGadget = 309, // tells master to start a gadget\r\n\tSaveSettings = 310,\r\n\tUpdateActionState = 311,\r\n\tDestroyGadget = 312,\r\n\tResourceLoadFailed = 313,\r\n\r\n\t// System messages\r\n\tGetInstalledGadgets = 400,\r\n\tGetInstalledGadgetsResponse = 401,\r\n}\r\n\r\nexport enum WebSocketCloseCodes\r\n{\r\n\tUserDestroyedGadget = 4701,\r\n}\r\n\r\nexport enum EndpointType\r\n{\r\n\tUnknown = -1,\r\n\tHub = 0,\r\n\tGadget = 1,\r\n\tNode = 2,\r\n\tRenderer = 3,\r\n\tMonitor = 4,\r\n}\r\n\r\nexport interface EndpointAddr\r\n{\r\n\ttype: EndpointType;\r\n\tendpointId?: number;\r\n\tnodeId?: number;\r\n}\r\n\r\nfunction endpointTypeFromCharacter( c: string ): EndpointType\r\n{\r\n\tswitch( c )\r\n\t{\r\n\t\tcase \"H\": return EndpointType.Hub;\r\n\t\tcase \"G\": return EndpointType.Gadget;\r\n\t\tcase \"N\": return EndpointType.Node;\r\n\t\tcase \"M\": return EndpointType.Monitor;\r\n\t\tcase \"R\": return EndpointType.Renderer;\r\n\t\tdefault: return EndpointType.Unknown;\r\n\t}\r\n}\r\n\r\nfunction endpointCharacterFromType( ept: EndpointType ): string\r\n{\r\n\tswitch( ept )\r\n\t{\r\n\t\tcase EndpointType.Hub: return \"H\";\r\n\t\tcase EndpointType.Gadget: return \"G\";\r\n\t\tcase EndpointType.Node: return \"N\";\r\n\t\tcase EndpointType.Monitor: return \"M\";\r\n\t\tcase EndpointType.Renderer: return \"R\";\r\n\t\tcase EndpointType.Unknown: return \"U\";\r\n\t\tdefault: return \"?\";\r\n\t}\r\n}\r\n\r\nexport function endpointAddrToString( epa: EndpointAddr ) : string\r\n{\r\n\tif( !epa )\r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn endpointCharacterFromType( epa.type )\r\n\t\t+ \":\" + ( epa.endpointId ? epa.endpointId : 0 )\r\n\t\t+ \":\" + ( epa.nodeId ? epa.nodeId : 0 );\r\n\t}\r\n}\r\n\r\n\r\nexport function stringToEndpointAddr( epaStr: string ) : EndpointAddr\r\n{\r\n\tlet re = new RegExp( \"^(.):([0-9]+):([0-9]+)$\" );\r\n\tlet match = re.exec( epaStr );\r\n\tif( !match )\r\n\t{\r\n\t\tconsole.log( `endpoint string ${ epaStr } failed to parse` );\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t{ \r\n\t\t\ttype: endpointTypeFromCharacter( match[1] ),\r\n\t\t\tendpointId: parseInt( match[2] ),\r\n\t\t\tnodeId: parseInt( match[3] ),\r\n\t\t} );\r\n}\r\n\r\nexport function endpointAddrIsEmpty( epa: EndpointAddr ): boolean\r\n{\r\n\treturn epa == null || epa.type == undefined || epa.type == EndpointType.Unknown;\r\n}\r\n\r\nexport function endpointAddrsMatch( epa1: EndpointAddr, epa2: EndpointAddr ): boolean\r\n{\r\n\tif( endpointAddrIsEmpty( epa1 ) )\r\n\t\treturn endpointAddrIsEmpty( epa2 );\r\n\telse if( endpointAddrIsEmpty( epa2 ) )\r\n\t\treturn false;\r\n\r\n\treturn epa1.type == epa2.type && epa1.nodeId == epa2.nodeId && epa1.endpointId == epa2.endpointId;\r\n}\r\n\r\nexport function indexOfEndpointAddrs( epaArray: EndpointAddr[], epa: EndpointAddr ): number\r\n{\r\n\tif( !epaArray )\r\n\t{\r\n\t\treturn -1;\r\n\t}\r\n\t\r\n\tfor( let i = 0; i < epaArray.length; i++ )\r\n\t{\r\n\t\tif( endpointAddrsMatch( epaArray[i], epa ) )\r\n\t\t{\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nexport interface Envelope\r\n{\r\n\ttype: MessageType;\r\n\tsender?: EndpointAddr;\r\n\ttarget?: EndpointAddr; \r\n\tpayload?: string;\r\n\tpayloadUnpacked?: any;\r\n}\r\n\r\nexport interface MsgError\r\n{\r\n\tmessageType?: MessageType;\r\n\terror: string;\r\n}\r\n\r\nexport interface MsgSetEndpointType\r\n{\r\n\tnewEndpointType: EndpointType;\r\n\tgadgetUri?: string;\r\n\tinitialHook?: string;\r\n\tpersistenceUuid?: string;\r\n}\r\n\r\nexport interface MsgSetEndpointTypeResponse\r\n{\r\n\tendpointId: number;\r\n\tsettings?: any;\r\n\tpersistenceUuid?: string;\r\n}\r\n\r\nexport interface MsgNewEndpoint\r\n{\r\n\tnewEndpointType: EndpointType;\r\n\tendpointId: number;\r\n\tgadgetUri?: string;\r\n}\r\n\r\nexport interface MsgLostEndpoint\r\n{\r\n\tendpointId: number;\r\n}\r\n\r\nexport interface MsgGetGadgetManifest\r\n{\r\n\tgadgetUri: string;\r\n}\r\n\r\nexport interface MsgGetGadgetManifestResponse\r\n{\r\n\terror?: string;\r\n\tmanifest?: AvGadgetManifest;\r\n\tgadgetUri?: string;\r\n}\r\n\r\n\r\nexport interface MsgUpdateSceneGraph\r\n{\r\n\troot?: AvNode;\r\n\thook?: string|EndpointAddr;\r\n\thookFromGadget?: AvNodeTransform;\r\n}\r\n\r\nexport enum EHookVolume\r\n{\r\n\tInner = 0,\r\n\tOuter = 1,\r\n}\r\n\r\nexport interface GrabberHookState\r\n{\r\n\thookId: EndpointAddr;\r\n\twhichVolume: EHookVolume;\r\n}\r\n\r\nexport interface MsgGrabberState\r\n{\r\n\tgrabberId: EndpointAddr;\r\n\thand: EHand;\r\n\tgrabbables?: AvGrabbableCollision[];\r\n\thooks?: GrabberHookState[];\r\n}\r\n\r\nexport interface MsgGrabEvent\r\n{\r\n\tevent: AvGrabEvent;\r\n}\r\n\r\nexport function parseEnvelope( envString: string, parsePayload: boolean = true ): Envelope\r\n{\r\n\ttry\r\n\t{\r\n\t\tlet env = JSON.parse( envString ) as Envelope;\r\n\t\tif( env.payload && parsePayload )\r\n\t\t{\r\n\t\t\tenv.payloadUnpacked = JSON.parse( env.payload );\r\n\t\t}\r\n\t\treturn env;\r\n\t}\r\n\tcatch( e )\r\n\t{\r\n\t\tconsole.log( \"failed to parse envelope\", envString, e );\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport interface MsgGadgetStarted\r\n{\r\n\tepToNotify: EndpointAddr;\r\n\tmainGrabbable?: number;\r\n\tmainHandle?: number;\r\n\tmainGrabbableGlobalId?: EndpointAddr;\r\n\tmainHandleGlobalId?: EndpointAddr;\r\n}\r\n\r\n\r\nexport interface MsgPokerProximity\r\n{\r\n\tpokerId: EndpointAddr;\r\n\thand: EHand;\r\n\tactionState: AvActionState;\r\n\tpanels: PokerProximity[];\r\n}\r\n\r\nexport interface MsgMouseEvent\r\n{\r\n\tevent: AvPanelMouseEvent;\r\n}\r\n\r\nexport interface MsgNodeHaptic\r\n{\r\n\tnodeId: EndpointAddr;\r\n\tamplitude: number;\r\n\tfrequency: number;\r\n\tduration: number;\r\n}\r\n\r\nexport interface MsgAttachGadgetToHook\r\n{\r\n\tgrabbableNodeId: EndpointAddr;\r\n\thookNodeId: EndpointAddr;\r\n\thookFromGrabbable?: AvNodeTransform;\r\n}\r\n\r\nexport interface MsgDetachGadgetFromHook\r\n{\r\n\tgrabbableNodeId: EndpointAddr;\r\n\thookNodeId: EndpointAddr;\r\n}\r\n\r\nexport interface MsgMasterStartGadget\r\n{\r\n\turi: string;\r\n\tinitialHook: string;\r\n\tpersistenceUuid: string;\r\n}\r\n\r\nexport interface MsgSaveSettings\r\n{\r\n\tsettings: any;\r\n}\r\n\r\nexport interface MsgUpdateActionState\r\n{\r\n\tgadgetId: number;\r\n\thand: EHand;\r\n\tactionState: AvActionState;\r\n}\r\n\r\nexport interface MsgOverrideTransform\r\n{\r\n\tnodeId: EndpointAddr;\r\n\ttransform: AvNodeTransform;\r\n}\r\n\r\n\r\nexport interface MsgGetInstalledGadgets\r\n{\r\n}\r\n\r\nexport interface MsgGetInstalledGadgetsResponse\r\n{\r\n\tinstalledGadgets: string[];\r\n}\r\n\r\nexport interface MsgDestroyGadget\r\n{\r\n\tgadgetId: number;\r\n}\r\n\r\nexport interface MsgResourceLoadFailed\r\n{\r\n\tnodeId: EndpointAddr;\r\n\tresourceUri: string;\r\n\terror: string;\r\n}\r\n\r\nexport interface PokerProximity\r\n{\r\n\tpanelId: EndpointAddr;\r\n\tx: number;\r\n\ty: number;\r\n\tdistance: number;\r\n}\r\n\r\nexport enum AvNodeType\r\n{\r\n\tInvalid = -1,\r\n\r\n\tContainer = 0,\r\n\tOrigin = 1,\r\n\tTransform = 2,\r\n\tModel = 3,\r\n\tPanel = 4,\r\n\tPoker = 5,\r\n\tGrabbable = 6,\r\n\tHandle = 7,\r\n\tGrabber = 8,\r\n\tHook = 9,\r\n\tLine = 10,\r\n\tPanelIntersection = 11,\r\n}\r\n\r\n\r\nexport enum AvPanelMouseEventType\r\n{\r\n\tUnknown = 0,\r\n\tDown = 1,\r\n\tUp = 2,\r\n\tEnter = 3,\r\n\tLeave = 4,\r\n\tMove = 5,\r\n};\r\n\r\nexport interface AvPanelMouseEvent\r\n{\r\n\ttype: AvPanelMouseEventType;\r\n\tpanelId: EndpointAddr;\r\n\tpokerId: EndpointAddr;\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nexport interface AvPanelHandler\r\n{\r\n\t( event: AvPanelMouseEvent ): void;\r\n}\r\n\r\nexport enum AvGrabEventType\r\n{\r\n\tUnknown = 0,\r\n\tEnterRange = 1,\r\n\tLeaveRange = 2,\r\n\tStartGrab = 3,\r\n\tEndGrab = 4,\r\n\tEnterHookRange = 5,\r\n\tLeaveHookRange = 6,\r\n\tRequestGrab = 7,\r\n\tRequestGrabResponse = 8,\r\n\tCancelGrab = 9,\r\n\tGrabStarted = 10,\r\n\tUpdateGrabberHighlight = 11,\r\n\tTransformUpdated = 12,\r\n\tDetach = 13,\r\n};\r\n\r\nexport enum GrabberHighlight\r\n{\r\n\tNone = 0,\r\n\tInRange = 1,\r\n\tWaitingForConfirmation = 2,\r\n\tWaitingForGrabToStart = 3,\r\n\tGrabbed = 4,\r\n\tNearHook = 5,\r\n\tWaitingForReleaseAfterRejection = 6,\r\n}\r\n\r\nexport interface AvGrabEvent\r\n{\r\n\ttype: AvGrabEventType;\r\n\tsenderId?: number;\r\n\tgrabbableId?: EndpointAddr;\r\n\thandleId?: EndpointAddr;\r\n\tgrabberId?: EndpointAddr;\r\n\thookId?: EndpointAddr;\r\n\trequestId?: number;\r\n\tallowed?: boolean;\r\n\tuseIdentityTransform?: boolean;\r\n\thighlight?: GrabberHighlight;\r\n\tparentFromNode?: AvNodeTransform;\r\n\tuniverseFromNode?: AvNodeTransform;\r\n\thookFromGrabbable?: AvNodeTransform;\r\n}\r\n\r\nexport interface AvGrabEventProcessor\r\n{\r\n\t( event: AvGrabEvent ): void;\r\n}\r\n\r\nexport interface AvGrabbableCollision\r\n{\r\n\tgrabbableId: EndpointAddr;\r\n\thandleId: EndpointAddr;\r\n\thandleFlags: number;\r\n\tgrabbableFlags: number;\r\n}\r\n\r\nexport interface AvVector\r\n{\r\n\tx: number;\r\n\ty: number;\r\n\tz: number;\r\n}\r\n\r\nexport interface AvQuaternion\r\n{\r\n\tx: number;\r\n\ty: number;\r\n\tz: number;\r\n\tw: number;\r\n}\r\n\r\nexport interface AvNodeTransform\r\n{\r\n\tposition?: AvVector;\r\n\trotation?: AvQuaternion;\r\n\tscale?: AvVector;\r\n}\r\n\r\nexport enum EVolumeType\r\n{\r\n\tInvalid = -1,\r\n\r\n\tSphere = 0,\r\n\tModelBox = 1,\r\n\tAABB = 1,\r\n};\r\n\r\n\r\nexport interface AABB\r\n{\r\n\txMin: number;\r\n\txMax: number;\r\n\tyMin: number;\r\n\tyMax: number;\r\n\tzMin: number;\r\n\tzMax: number;\r\n}\r\n\r\nexport interface AvVolume\r\n{\r\n\ttype: EVolumeType;\r\n\r\n\tradius?: number;\r\n\turi?: string;\r\n\taabb?: AABB;\r\n}\r\n\r\nexport enum ENodeFlags\r\n{\r\n\tVisible \t\t\t\t\t= 1 << 0,\r\n\tPreserveGrabTransform \t\t= 1 << 1,\r\n\tNotifyOnTransformChange\t\t= 1 << 2,\r\n\tNotifyProximityWithoutGrab \t= 1 << 3,\r\n\tAllowDropOnHooks  \t\t\t= 1 << 4,\r\n\tAllowMultipleDrops\t\t\t= 1 << 5,\r\n\tTethered\t\t\t\t\t= 1 << 6,\r\n}\r\n\r\nexport interface AvConstraint\r\n{\r\n\tminX: number;\r\n\tmaxX: number;\r\n\tminY: number;\r\n\tmaxY: number;\r\n\tminZ: number;\r\n\tmaxZ: number;\r\n}\r\n\r\nexport interface AvColor\r\n{\r\n\tr: number;\r\n\tg: number;\r\n\tb: number;\r\n\ta?: number;\r\n}\r\n\r\nexport interface AvNode\r\n{\r\n\ttype: AvNodeType;\r\n\tid: number;\r\n\tpersistentName?: string;\r\n\tglobalId?: EndpointAddr;\r\n\tflags: ENodeFlags;\r\n\tchildren?: AvNode[];\r\n\r\n\tpropOrigin?: string;\r\n\tpropTransform?: AvNodeTransform;\r\n\tpropModelUri?: string;\r\n\tpropVolume?: AvVolume;\r\n\tpropOuterVolumeScale?: number;\r\n\tpropInteractive?: boolean;\r\n\tpropCustomNodeType?: string;\r\n\tpropSharedTexture?: AvSharedTextureInfo;\r\n\tpropConstraint?: AvConstraint;\r\n\tpropColor?: AvColor;\r\n\tpropEndAddr?: EndpointAddr;\r\n\tpropThickness?: number;\r\n\tpropStartGap?: number;\r\n\tpropEndGap?: number;\r\n\tpropScaleToFit?: AvVector;\r\n}\r\n\r\nexport enum EHand\r\n{\r\n\tInvalid = -1,\r\n\tLeft = 0,\r\n\tRight = 1,\r\n};\r\n\r\nenum ETextureType\r\n{\r\n\tInvalid = 0,\r\n\tD3D11Texture2D = 1,\r\n}\r\n\r\nenum ETextureFormat\r\n{\r\n\tR8G8B8A8 = 1,\r\n\tB8G8R8A8 = 2,\r\n}\r\n\r\nexport interface AvSharedTextureInfo\r\n{\r\n\tdxgiHandle?: string;\r\n\ttype: ETextureType;\r\n\tformat: ETextureFormat;\r\n\tinvertY?: boolean;\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface AvGadgetManifest\r\n{\r\n\tname: string;\r\n\tpermissions: string[];\r\n\twidth: number;\r\n\theight: number;\r\n\tmodel: string;\r\n\tstartAutomatically: boolean;\r\n}\r\n\r\n\r\nexport enum EAction\r\n{\r\n\tA = 0,\r\n\tB = 1,\r\n\tSqueeze = 2,\r\n\tGrab = 3,\r\n\tDetach = 4,\r\n\tMax\r\n}\r\n\r\nexport function getActionFromState( action: EAction, state: AvActionState): boolean\r\n{\r\n\tif( !state )\r\n\t\treturn false;\r\n\r\n\tswitch( action )\r\n\t{\r\n\t\tcase EAction.A: return state.a;\r\n\t\tcase EAction.B: return state.b;\r\n\t\tcase EAction.Grab: return state.grab;\r\n\t\tcase EAction.Squeeze: return state.squeeze;\r\n\t\tcase EAction.Detach: return state.detach;\r\n\t\tdefault: return false;\r\n\t}\r\n}\r\n\r\nexport function emptyActionState(): AvActionState\r\n{\r\n\treturn (\r\n\t\t{\r\n\t\t\ta: false, b:false, squeeze: false,\r\n\t\t\tgrab: false, detach: false\r\n\t\t} );\r\n}\r\n\r\n\r\nexport function filterActionsForGadget( actionState: AvActionState ): AvActionState\r\n{\r\n\treturn {\r\n\t\ta: actionState.a,\r\n\t\tb: actionState.b,\r\n\t\tsqueeze: actionState.squeeze,\r\n\t};\r\n}\r\n\r\n","export const g_builtinModelPrefix = \"http://localhost:23842/models/\";\r\nexport const g_builtinModelAardvark = g_builtinModelPrefix + \"aardvark.glb\";\r\nexport const g_builtinModelSphere = g_builtinModelPrefix + \"sphere/sphere.glb\";\r\nexport const g_builtinModelGear = g_builtinModelPrefix + \"gear.glb\";\r\nexport const g_builtinModelPanel = g_builtinModelPrefix + \"panel/panel.glb\";\r\nexport const g_builtinModelPanelInverted = g_builtinModelPrefix + \"panel/panel_inverted.glb\";\r\nexport const g_builtinModelHook = g_builtinModelPrefix + \"hook.glb\";\r\nexport const g_builtinModelArrow = g_builtinModelPrefix + \"arrow.glb\";\r\nexport const g_builtinModelBoundingBox = g_builtinModelPrefix + \"bounding_box.glb\";\r\nexport const g_builtinModelCylinder = g_builtinModelPrefix + \"cylinder.glb\";\r\nexport const g_builtinModelPlus = g_builtinModelPrefix + \"plus.glb\";\r\nexport const g_builtinModelMinus = g_builtinModelPrefix + \"minus.glb\";\r\nexport const g_builtinModelBracelet = g_builtinModelPrefix + \"bracelet.glb\";\r\nexport const g_builtinModelError = g_builtinModelPrefix + \"error.glb\";\r\n"],"sourceRoot":""}